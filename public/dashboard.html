<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <style>
    body {
        font-family: 'Montserrat', sans-serif; /* Updated to match the font used in the product cards */
        background-color: #414852; /* Updated to match the background color of the product cards */
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0;
        padding: 20px;
    }
    
    h1 {
        margin-bottom: 20px;
        color: #ddd; /* Updated to match the text color from the product cards */
        font-family: 'Bebas Neue', sans-serif; /* Updated to match the font used in the product cards */
        font-size: 2.5rem; /* Updated to match the title font size in the product cards */
    }
    
    nav {
        width: 100%;
        max-width: 1200px;
        display: flex;
        justify-content: flex-end;
        margin-bottom: 20px;
    }
    
    nav button {
        padding: 10px 15px; /* Updated padding to match the product card buttons */
        border: none;
        background-color: #fff; /* Updated to match the button color from the product cards */
        color: #333; /* Updated to match the button text color from the product cards */
        border-radius: 4px; /* Updated to match the button border radius from the product cards */
        cursor: pointer;
        font-weight: bold; /* Updated to match the button text weight from the product cards */
        font-size: 12px; /* Updated to match the button font size from the product cards */
        text-transform: uppercase; /* Updated to match the text transform from the product cards */
        letter-spacing: 1px; /* Added to match the button text styling from the product cards */
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    nav button:hover {
        background-color: orangered; /* Updated to match the hover color from the product cards */
        color: #fff; /* Updated to match the hover text color from the product cards */
    }
    
    .filter-buttons {
        margin-bottom: 20px;
        display: flex;
        gap: 10px;
    }
    
    .filter-buttons button {
        padding: 10px 15px; /* Updated padding to match the product card buttons */
        border: none;
        background-color: #fff; /* Updated to match the button color from the product cards */
        color: #333; /* Updated to match the button text color from the product cards */
        border-radius: 4px; /* Updated to match the button border radius from the product cards */
        cursor: pointer;
        font-weight: bold; /* Updated to match the button text weight from the product cards */
        font-size: 12px; /* Updated to match the button font size from the product cards */
        text-transform: uppercase; /* Updated to match the text transform from the product cards */
        letter-spacing: 1px; /* Added to match the button text styling from the product cards */
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .filter-buttons button:hover {
        background-color: orangered; /* Updated to match the hover color from the product cards */
        color: #fff; /* Updated to match the hover text color from the product cards */
    }
    
    .goods-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: left;
        gap: 20px;
        width: 100%;
        max-width: 1200px;
        padding: 0 20px;
    }
    
    .goods-item {
        position: relative;
        width: 280px;
        height: 400px;
        background: #414852; /* Updated to match the background color of the product cards */
        border-radius: 15px; /* Updated to match the border radius of the product cards */
        overflow: hidden;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5); /* Updated to match the box shadow of the product cards */
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    .goods-item:hover {
        transform: translateY(-10px); /* Updated to match the hover effect of the product cards */
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* Updated to match the box shadow of the product cards */
    }
    
    .goods-item img {
        width: 100%;
        height: 200px;
        object-fit: cover; /* Ensure the image covers the area without distortion */
        transition: transform 0.3s ease; /* Added for zoom effect */
    }
    
    .goods-item:hover img {
        transform: scale(1.1); /* Added for zoom effect on hover */
    }
    
    .goods-item p {
        margin: 10px 0;
        color: #ddd; /* Updated to match the text color of the product cards */
    }
    
    .goods-item .price {
        font-size: 30px; /* Updated to match the price font size of the product cards */
        font-weight: bold;
        color: aqua; /* Updated to match the price color of the product cards */
    }
    
    .goods-item button {
        margin-top: 10px;
        padding: 5px 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        font-size: 12px; /* Updated to match the button font size from the product cards */
        text-transform: uppercase; /* Updated to match the text transform from the product cards */
        letter-spacing: 1px; /* Added to match the button text styling from the product cards */
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .goods-item .edit-btn {
        background-color: #fff; /* Updated to match the button color from the product cards */
        color: #333; /* Updated to match the button text color from the product cards */
    }
    
    .goods-item .delete-btn {
        background-color: #FF0000; /* Updated to match the delete button color from the product cards */
        color: white;
    }
    
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
    }
    
    .modal-content {
        background-color: #414852; /* Updated to match the modal background color from the product cards */
        margin: 10% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 500px;
        border-radius: 15px; /* Updated to match the border radius of the product cards */
    }
    
    .close {
        color: #ddd; /* Updated to match the close button color from the product cards */
        float: right;
        font-size: 28px;
        font-weight: bold;
    }
    
    .close:hover,
    .close:focus {
        color: #fff; /* Updated to match the close button hover color from the product cards */
        text-decoration: none;
        cursor: pointer;
    }
    
    form label {
        display: block;
        margin: 10px 0 5px;
        color: #ddd; /* Updated to match the label color from the product cards */
    }
    
    form input,
    form textarea,
    form select,
    form button {
        width: 95%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    
    form button {
        background-color: #007BFF;
        color: white;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }
    
    form button:hover {
        background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h1>Dashboard</h1>
  <nav>
    <button id="openModalBtn">+</button>
  </nav>

  <div class="filter-buttons">
    <button onclick="filterGoods('all')">All</button>
    <button onclick="filterGoods('electronics')">Electronics</button>
    <button onclick="filterGoods('kitchen')">Kitchen Utensils</button>
    <button onclick="filterGoods('salon')">Salon Details</button>
  </div>

  <!-- The Modal -->
  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Post Goods</h2>

      <form id="postGoodsForm">
        <label for="goodsImageURL">Image (URL):</label>
        <input type="url" id="goodsImageURL" name="goodsImageURL" placeholder="http://example.com/image.jpg"><br><br>

        <label for="goodsPrice">Price:</label>
        <input type="number" id="goodsPrice" name="goodsPrice" required>

        <label for="goodsDescription">Description:</label>
        <textarea id="goodsDescription" name="goodsDescription" required></textarea>

        <label for="goodsCategory">Category:</label>
        <select id="goodsCategory" name="goodsCategory" required>
          <option value="electronics">Electronics</option>
          <option value="kitchen">Kitchen Utensils</option>
          <option value="salon">Salon Details</option>
        </select>

        <button type="submit" onclick="postgoods()">Post</button>
      </form>
    </div>
  </div>

  <div id="goodsContainer" class="goods-container">
    <!-- Goods items will be dynamically added here -->
  </div>

  <script>


document.addEventListener("DOMContentLoaded", () => {
    const modal = document.getElementById("myModal");
    const openModalBtn = document.getElementById("openModalBtn");
    const closeModalBtn = document.getElementsByClassName("close")[0];
    const postGoodsForm = document.getElementById("postGoodsForm");
    const goodsContainer = document.getElementById("goodsContainer");

    // Open modal
    openModalBtn.onclick = function () {
        modal.style.display = "block";
    };

    // Close modal
    closeModalBtn.onclick = function () {
        modal.style.display = "none";
    };

    // Close modal when clicking outside of it
    window.onclick = function (event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    };
    document.addEventListener("DOMContentLoaded", () => {
  // ...

  // Handle form submission
  const postGoodsForm = document.getElementById("postGoodsForm");
  postGoodsForm.onsubmit = async function (event) {
    event.preventDefault();

    // Your form submission logic here
    const goodsImageURL = document.getElementById("goodsImageURL").value;
    const goodsPrice = document.getElementById("goodsPrice").value;
    const goodsDescription = document.getElementById("goodsDescription").value;
    const goodsCategory = document.getElementById("goodsCategory").value;
    const contactInfo = "Contact: example@example.com"; // Fixed contact information

    const goods = {
      image: goodsImageURL,
      price: goodsPrice,
      description: goodsDescription,
      category: goodsCategory,
      contact: contactInfo
    };

    try {
      const response = await fetch('https://adonay.vercel.app/api/goods', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(goods)
      });

      if (response.ok) {
        console.log('Goods posted successfully');
        modal.style.display = "none";
        postGoodsForm.reset();
        loadGoods();
        updateIndex(goods);
      } else {
        console.error('Error:', response.statusText);
      }
    } catch (error) {
      console.error('Error:', error);
    }
  };

  // ...
});
    // Load goods from the backend API
    async function loadGoods(filter = 'all') {
        goodsContainer.innerHTML = ''; // Clear the container

        try {
            const response = await fetch('https://adonay.vercel.app/api/goods');

            if (response.ok) {
                const goodsList = await response.json();

                goodsList.forEach(goods => {
                    if (filter === 'all' || goods.category === filter) {
                        const goodsItem = document.createElement('div');
                        goodsItem.className = 'goods-item';

                        const img = document.createElement('img');
                        img.src = goods.image;
                        goodsItem.appendChild(img);

                        const price = document.createElement('p');
                        price.textContent = 'Price: $' + goods.price;
                        goodsItem.appendChild(price);

                        const description = document.createElement('p');
                        description.textContent = 'Description: ' + goods.description;
                        goodsItem.appendChild(description);

                        const contact = document.createElement('p');
                        contact.textContent = goods.contact;
                        goodsItem.appendChild(contact);

                        const editBtn = document.createElement('button');
                        editBtn.className = 'edit-btn';
                        editBtn.textContent = 'Edit';
                        editBtn.onclick = function () {
                            editGoods(goods._id);
                        };
                        goodsItem.appendChild(editBtn);

                        const deleteBtn = document.createElement('button');
                        deleteBtn.className = 'delete-btn';
                        deleteBtn.textContent = 'Delete';
                        deleteBtn.onclick = function () {
                            deleteGoods(goods._id);
                        };
                        goodsItem.appendChild(deleteBtn);

                        goodsContainer.appendChild(goodsItem);
                    }
                });
            } else {
                console.error('Error:', response.statusText);
            }
        } catch (error) {
            console.error('Error:', error);
        }
    }

    // Function to filter goods by category
    function filterGoods(category) {
        loadGoods(category);
    }

    // Function to delete goods
    async function deleteGoods(id) {
        try {
            const response = await fetch(`https://adonay.vercel.app/api/goods/${id}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            if (response.ok) {
                loadGoods();
                updateIndexAfterDelete(id);
            } else {
                console.error('Error:', response.statusText);
            }
        } catch (error) {
            console.error('Error:', error);
        }
    }

    // Function to edit goods
    async function editGoods(id) {
        try {
            const response = await fetch(`https://adonay.vercel.app/api/goods/${id}`);

            if (response.ok) {
                const goods = await response.json();
                document.getElementById("goodsImageURL").value = goods.image;
                document.getElementById("goodsPrice").value = goods.price;
                document.getElementById("goodsDescription").value = goods.description;
                document.getElementById("goodsCategory").value = goods.category;

                modal.style.display = "block";

                postGoodsForm.onsubmit = async function (event) {
                    event.preventDefault();

                    const updatedGoods = {
                        image: document.getElementById("goodsImageURL").value,
                        price: document.getElementById("goodsPrice").value,
                        description: document.getElementById("goodsDescription").value,
                        category: document.getElementById("goodsCategory").value,
                        contact: goods.contact
                    };


                    async function getProduct(id) {
  const response = await fetch(`/api/getProduct?id=${id}`);
  const product = await response.json();
  return product;
}

// Usage
getProduct('1').then((product) => {
  console.log(product);
});

                    try {
                        const updateResponse = await fetch(`https://adonay.vercel.app/api/goods/${id}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(updatedGoods)
                        });

                        if (updateResponse.ok) {
                            modal.style.display = "none";
                            postGoodsForm.reset();
                            loadGoods();
                            updateIndexAfterEdit(updatedGoods);
                        } else {
                            console.error('Error:', updateResponse.statusText);
                        }
                    } catch (error) {
                        console.error('Error:', error);
                    }
                };
            } else {
                console.error('Error:', response.statusText);
            }
        } catch (error) {
            console.error('Error:', error);
        }
    }

    // Function to update the index.html with new goods
    function updateIndex(goods) {
        // Assuming you have a way to update the index.html, maybe an iframe or another API call.
        console.log('Update index.html with:', goods);
    }

    // Function to update index.html after editing a goods
    function updateIndexAfterEdit(goods) {
        console.log('Update index.html with edited goods:', goods);
    }

    // Function to update index.html after deleting a goods
    function updateIndexAfterDelete(id) {
        console.log('Update index.html after deleting goods with ID:', id);
    }

    // Load the goods list when the page loads
    window.onload = function () {
        loadGoods();
    };
});

  </script>
</body>
</html>
