<!DOCTYPE html>
<html>
<head>
  <title>Dashboard</title>
  <style>
    body {
        font-family: 'Montserrat', sans-serif; /* Updated to match the font used in the product cards */
        background-color: #414852; /* Updated to match the background color of the product cards */
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0;
        padding: 20px;
    }
    
    h1 {
        margin-bottom: 20px;
        color: #ddd; /* Updated to match the text color from the product cards */
        font-family: 'Bebas Neue', sans-serif; /* Updated to match the font used in the product cards */
        font-size: 2.5rem; /* Updated to match the title font size in the product cards */
    }
    
    nav {
        width: 100%;
        max-width: 1200px;
        display: flex;
        justify-content: flex-end;
        margin-bottom: 20px;
    }
    
    nav button {
        padding: 10px 15px; /* Updated padding to match the product card buttons */
        border: none;
        background-color: #fff; /* Updated to match the button color from the product cards */
        color: #333; /* Updated to match the button text color from the product cards */
        border-radius: 4px; /* Updated to match the button border radius from the product cards */
        cursor: pointer;
        font-weight: bold; /* Updated to match the button text weight from the product cards */
        font-size: 12px; /* Updated to match the button font size from the product cards */
        text-transform: uppercase; /* Updated to match the text transform from the product cards */
        letter-spacing: 1px; /* Added to match the button text styling from the product cards */
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    nav button:hover {
        background-color: orangered; /* Updated to match the hover color from the product cards */
        color: #fff; /* Updated to match the hover text color from the product cards */
    }
    
    .filter-buttons {
        margin-bottom: 20px;
        display: flex;
        gap: 10px;
    }
    
    .filter-buttons button {
        padding: 10px 15px; /* Updated padding to match the product card buttons */
        border: none;
        background-color: #fff; /* Updated to match the button color from the product cards */
        color: #333; /* Updated to match the button text color from the product cards */
        border-radius: 4px; /* Updated to match the button border radius from the product cards */
        cursor: pointer;
        font-weight: bold; /* Updated to match the button text weight from the product cards */
        font-size: 12px; /* Updated to match the button font size from the product cards */
        text-transform: uppercase; /* Updated to match the text transform from the product cards */
        letter-spacing: 1px; /* Added to match the button text styling from the product cards */
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .filter-buttons button:hover {
        background-color: orangered; /* Updated to match the hover color from the product cards */
        color: #fff; /* Updated to match the hover text color from the product cards */
    }
    
    .goods-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: left;
        gap: 20px;
        width: 100%;
        max-width: 1200px;
        padding: 0 20px;
    }
    
    .goods-item {
        position: relative;
        width: 280px;
        height: 400px;
        background: #414852; /* Updated to match the background color of the product cards */
        border-radius: 15px; /* Updated to match the border radius of the product cards */
        overflow: hidden;
        box-shadow: 0 2px 20px rgba(0, 0, 0, 0.5); /* Updated to match the box shadow of the product cards */
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
    }
    
    .goods-item:hover {
        transform: translateY(-10px); /* Updated to match the hover effect of the product cards */
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15); /* Updated to match the box shadow of the product cards */
    }
    
    .goods-item img {
        width: 100%;
        height: 200px;
        object-fit: cover; /* Ensure the image covers the area without distortion */
        transition: transform 0.3s ease; /* Added for zoom effect */
    }
    
    .goods-item:hover img {
        transform: scale(1.1); /* Added for zoom effect on hover */
    }
    
    .goods-item p {
        margin: 10px 0;
        color: #ddd; /* Updated to match the text color of the product cards */
    }
    
    .goods-item .price {
        font-size: 30px; /* Updated to match the price font size of the product cards */
        font-weight: bold;
        color: aqua; /* Updated to match the price color of the product cards */
    }
    
    .goods-item button {
        margin-top: 10px;
        padding: 5px 10px;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-weight: bold;
        font-size: 12px; /* Updated to match the button font size from the product cards */
        text-transform: uppercase; /* Updated to match the text transform from the product cards */
        letter-spacing: 1px; /* Added to match the button text styling from the product cards */
        transition: background-color 0.3s ease, color 0.3s ease;
    }
    
    .goods-item .edit-btn {
        background-color: #fff; /* Updated to match the button color from the product cards */
        color: #333; /* Updated to match the button text color from the product cards */
    }
    
    .goods-item .delete-btn {
        background-color: #FF0000; /* Updated to match the delete button color from the product cards */
        color: white;
    }
    
    .modal {
        display: none;
        position: fixed;
        z-index: 1;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        overflow: auto;
        background-color: rgba(0, 0, 0, 0.4);
    }
    
    .modal-content {
        background-color: #414852; /* Updated to match the modal background color from the product cards */
        margin: 10% auto;
        padding: 20px;
        border: 1px solid #888;
        width: 80%;
        max-width: 500px;
        border-radius: 15px; /* Updated to match the border radius of the product cards */
    }
    
    .close {
        color: #ddd; /* Updated to match the close button color from the product cards */
        float: right;
        font-size: 28px;
        font-weight: bold;
    }
    
    .close:hover,
    .close:focus {
        color: #fff; /* Updated to match the close button hover color from the product cards */
        text-decoration: none;
        cursor: pointer;
    }
    
    form label {
        display: block;
        margin: 10px 0 5px;
        color: #ddd; /* Updated to match the label color from the product cards */
    }
    
    form input,
    form textarea,
    form select,
    form button {
        width: 95%;
        padding: 10px;
        margin-bottom: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
    
    form button {
        background-color: #007BFF;
        color: white;
        border: none;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s ease;
    }
    
    form button:hover {
        background-color: #0056b3;
    }
  </style>
</head>
<body>
  <h1>Dashboard</h1>
  <nav>
    <button id="openModalBtn">+</button>
  </nav>

  <div class="filter-buttons">
    <button onclick="filterGoods('all')">All</button>
    <button onclick="filterGoods('electronics')">Electronics</button>
    <button onclick="filterGoods('kitchen')">Kitchen Utensils</button>
    <button onclick="filterGoods('salon')">Salon Details</button>
  </div>

  <!-- The Modal -->
  <div id="myModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Post Goods</h2>

      <form id="postGoodsForm">
        <label for="goodsImageURL">Image (URL):</label>
        <input type="url" id="goodsImageURL" name="goodsImageURL" placeholder="http://example.com/image.jpg"><br><br>

        <label for="goodsPrice">Price:</label>
        <input type="number" id="goodsPrice" name="goodsPrice" required>

        <label for="goodsDescription">Description:</label>
        <textarea id="goodsDescription" name="goodsDescription" required></textarea>

        <label for="goodsCategory">Category:</label>
        <select id="goodsCategory" name="goodsCategory" required>
          <option value="electronics">Electronics</option>
          <option value="kitchen">Kitchen Utensils</option>
          <option value="salon">Salon Details</option>
        </select>

        <button type="submit">Post</button>
      </form>
    </div>
  </div>

  <div id="goodsContainer" class="goods-container">
    <!-- Goods items will be dynamically added here -->
  </div>

  <script>


// Function to handle form submission
document.getElementById("postGoodsForm").onsubmit = function(event) {
  event.preventDefault();

  var goodsImageURL = document.getElementById("goodsImageURL").value;
  var goodsPrice = document.getElementById("goodsPrice").value;
  var goodsDescription = document.getElementById("goodsDescription").value;
  var goodsCategory = document.getElementById("goodsCategory").value;
  var contactInfo = "Contact: example@example.com"; // Fixed contact information

  // Create a new goods object
  var goods = {
    image: goodsImageURL,
    price: goodsPrice,
    description: goodsDescription,
    category: goodsCategory,
    contact: contactInfo
  };

  // Save the new goods object to the backend
  fetch('/post-goods', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify(goods)
  })
  .then(response => response.json())
  .then(data => {
    // Close the modal after submission
    modal.style.display = "none";

    // Clear the form inputs
    document.getElementById("postGoodsForm").reset();

    // Reload the goods list
    loadGoods();
  })
  .catch(error => console.error('Error:', error));
};


    
    var modal = document.getElementById("myModal");
    var span = document.getElementsByClassName("close")[0];

    span.onclick = function() {
      modal.style.display = "none";
    }

    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }

    document.getElementById("postGoodsForm").onsubmit = function(event) {
      event.preventDefault();

      var goodsImageURL = document.getElementById("goodsImageURL").value;
      var goodsPrice = document.getElementById("goodsPrice").value;
      var goodsDescription = document.getElementById("goodsDescription").value;
      var goodsCategory = document.getElementById("goodsCategory").value;
      var contactInfo = "Contact: example@example.com"; 

      var goods = {
        image: goodsImageURL,
        price: goodsPrice,
        description: goodsDescription,
        category: goodsCategory,
        contact: contactInfo
      };

      fetch('/post-goods', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(goods)
      })
      .then(response => response.json())
      .then(data => {
        modal.style.display = "none";
        document.getElementById("postGoodsForm").reset();
        loadGoods();
      })
      .catch(error => console.error('Error:', error));
    };

    function loadGoods(filter = 'all') {
      fetch('/get-goods')
        .then(response => response.json())
        .then(goodsList => {
          var goodsContainer = document.getElementById('goodsContainer');
          goodsContainer.innerHTML = '';

          goodsList.forEach(goods => {
            if (filter === 'all' || goods.category === filter) {
              var goodsItem = document.createElement('div');
              goodsItem.className = 'goods-item';

              var img = document.createElement('img');
              img.src = goods.image;
              goodsItem.appendChild(img);

              var price = document.createElement('p');
              price.textContent = 'Price: $' + goods.price;
              goodsItem.appendChild(price);

              var description = document.createElement('p');
              description.textContent = 'Description: ' + goods.description;
              goodsItem.appendChild(description);

              var contact = document.createElement('p');
              contact.textContent = goods.contact;
              goodsItem.appendChild(contact);

              var editBtn = document.createElement('button');
              editBtn.className = 'edit-btn';
              editBtn.textContent = 'Edit';
              editBtn.onclick = function() {
                editGoods(goodsList.indexOf(goods));
              };
              goodsItem.appendChild(editBtn);

              var deleteBtn = document.createElement('button');
              deleteBtn.className = 'delete-btn';
              deleteBtn.textContent = 'Delete';
              deleteBtn.onclick = function() {
                deleteGoods(goodsList.indexOf(goods));
              };
              goodsItem.appendChild(deleteBtn);

              goodsContainer.appendChild(goodsItem);
            }
          });
        });
    }

    function filterGoods(category) {
      loadGoods(category);
    }

    function deleteGoods(index) {
      fetch('/delete-goods', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ index })
      })
      .then(() => {
        loadGoods();
      })
      .catch(error => console.error('Error:', error));
    }

    function editGoods(index) {
      fetch(`/get-goods/${index}`)
        .then(response => response.json())
        .then(goods => {
          document.getElementById("goodsImageURL").value = goods.image;
          document.getElementById("goodsPrice").value = goods.price;
          document.getElementById("goodsDescription").value = goods.description;
          document.getElementById("goodsCategory").value = goods.category;

          modal.style.display = "block";

          document.getElementById("postGoodsForm").onsubmit = function(event) {
            event.preventDefault();

            var updatedGoods = {
              image: document.getElementById("goodsImageURL").value,
              price: document.getElementById("goodsPrice").value,
              description: document.getElementById("goodsDescription").value,
              category: document.getElementById("goodsCategory").value,
              contact: goods.contact
            };

            fetch(`/update-goods/${index}`, {
              method: 'POST',
              headers: {
                'Content-Type': 'application/json'
              },
              body: JSON.stringify(updatedGoods)
            })
            .then(() => {
              modal.style.display = "none";
              document.getElementById("postGoodsForm").reset();
              loadGoods();
            })
            .catch(error => console.error('Error:', error));
          };
        });
    }

    document.getElementById("openModalBtn").onclick = function() {
      modal.style.display = "block";
    }

    window.onload = function() {
      loadGoods();
    };
    
  </script>
</body>
</html>
